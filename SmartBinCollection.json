{
	"info": {
		"name": "SmartBin API",
		"description": "Complete API collection for SmartBin - All Services",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "auth_url",
			"value": "http://localhost:8001",
			"type": "string"
		},
		{
			"key": "bin_url",
			"value": "http://localhost:8002",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "bin_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "reclamation_url",
			"value": "http://localhost:8004",
			"type": "string"
		},
		{
			"key": "reclamation_id",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "Auth Service (Port 8001)",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{auth_url}}/api/auth/health/",
							"host": ["{{auth_url}}"],
							"path": ["api", "auth", "health", ""]
						}
					}
				},
				{
					"name": "Register User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('access_token', jsonData.tokens.access);",
									"    pm.collectionVariables.set('user_id', jsonData.user.id);",
									"    console.log('✅ Token saved');",
									"    console.log('✅ User ID saved');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"john_doe\",\n    \"email\": \"john@example.com\",\n    \"password\": \"secure123\",\n    \"password_confirm\": \"secure123\",\n    \"phone_number\": \"+1234567890\"\n}"
						},
						"url": {
							"raw": "{{auth_url}}/api/auth/register/",
							"host": ["{{auth_url}}"],
							"path": ["api", "auth", "register", ""]
						}
					}
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('access_token', jsonData.tokens.access);",
									"    pm.collectionVariables.set('user_id', jsonData.user.id);",
									"    console.log('✅ Token saved');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"john_doe\",\n    \"password\": \"secure123\"\n}"
						},
						"url": {
							"raw": "{{auth_url}}/api/auth/login/",
							"host": ["{{auth_url}}"],
							"path": ["api", "auth", "login", ""]
						}
					}
				},
				{
					"name": "Get User Profile",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{auth_url}}/api/auth/profile/",
							"host": ["{{auth_url}}"],
							"path": ["api", "auth", "profile", ""]
						}
					}
				},
				{
					"name": "Add Points",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"user_id\": \"{{user_id}}\",\n    \"amount\": 15,\n    \"description\": \"Detected plastic waste\"\n}"
						},
						"url": {
							"raw": "{{auth_url}}/api/auth/points/add/",
							"host": ["{{auth_url}}"],
							"path": ["api", "auth", "points", "add", ""]
						}
					}
				},
				{
					"name": "Get Points History",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{auth_url}}/api/auth/points/history/",
							"host": ["{{auth_url}}"],
							"path": ["api", "auth", "points", "history", ""]
						}
					}
				}
			]
		},
		{
			"name": "Bin Service (Port 8002)",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{bin_url}}/api/bins/health/",
							"host": ["{{bin_url}}"],
							"path": ["api", "bins", "health", ""]
						}
					}
				},
				{
					"name": "Create Bin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('bin_id', jsonData.id);",
									"    console.log('✅ Bin ID saved:', jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Main Street Bin #1\",\n    \"qr_code\": \"BIN-001\",\n    \"location\": \"Main Street & 5th Ave\",\n    \"latitude\": 40.7128,\n    \"longitude\": -74.0060,\n    \"capacity\": 100,\n    \"status\": \"active\"\n}"
						},
						"url": {
							"raw": "{{bin_url}}/api/bins/list/",
							"host": ["{{bin_url}}"],
							"path": ["api", "bins", "list", ""]
						}
					}
				},
				{
					"name": "List All Bins",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{bin_url}}/api/bins/list/",
							"host": ["{{bin_url}}"],
							"path": ["api", "bins", "list", ""]
						}
					}
				},
				{
					"name": "Get Bin by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{bin_url}}/api/bins/list/{{bin_id}}/",
							"host": ["{{bin_url}}"],
							"path": ["api", "bins", "list", "{{bin_id}}", ""]
						}
					}
				},
				{
					"name": "Get Bin by QR Code",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{bin_url}}/api/bins/qr/BIN-001/",
							"host": ["{{bin_url}}"],
							"path": ["api", "bins", "qr", "BIN-001", ""]
						}
					}
				},
				{
					"name": "Open Bin",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"user_qr_code\": \"SB-{{user_id}}\"\n}"
						},
						"url": {
							"raw": "{{bin_url}}/api/bins/list/{{bin_id}}/open/",
							"host": ["{{bin_url}}"],
							"path": ["api", "bins", "list", "{{bin_id}}", "open", ""]
						}
					}
				},
				{
					"name": "Close Bin",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{bin_url}}/api/bins/list/{{bin_id}}/close/",
							"host": ["{{bin_url}}"],
							"path": ["api", "bins", "list", "{{bin_id}}", "close", ""]
						}
					}
				},
				{
					"name": "Update Fill Level",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"fill_level\": 75\n}"
						},
						"url": {
							"raw": "{{bin_url}}/api/bins/list/{{bin_id}}/update-fill-level/",
							"host": ["{{bin_url}}"],
							"path": ["api", "bins", "list", "{{bin_id}}", "update-fill-level", ""]
						}
					}
				},
				{
					"name": "View Usage Logs",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{bin_url}}/api/bins/usage-logs/",
							"host": ["{{bin_url}}"],
							"path": ["api", "bins", "usage-logs", ""]
						}
					}
				},
				{
					"name": "View Usage Logs by Bin",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{bin_url}}/api/bins/usage-logs/?bin_id={{bin_id}}",
							"host": ["{{bin_url}}"],
							"path": ["api", "bins", "usage-logs", ""],
							"query": [
								{
									"key": "bin_id",
									"value": "{{bin_id}}"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "Reclamation Service (Port 8004)",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{reclamation_url}}/api/reclamations/health/",
							"host": ["{{reclamation_url}}"],
							"path": ["api", "reclamations", "health", ""]
						}
					}
				},
				{
					"name": "Create Reclamation",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('reclamation_id', jsonData.id);",
									"    console.log('✅ Reclamation ID saved:', jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"user_qr_code\": \"SB-{{user_id}}\",\n    \"bin_id\": \"{{bin_id}}\",\n    \"reclamation_type\": \"full\",\n    \"title\": \"Bin is overflowing\",\n    \"message\": \"The bin at this location is completely full and trash is falling out. Please empty it soon.\",\n    \"location\": \"Main Street & 5th Ave\",\n    \"priority\": \"high\"\n}"
						},
						"url": {
							"raw": "{{reclamation_url}}/api/reclamations/list/",
							"host": ["{{reclamation_url}}"],
							"path": ["api", "reclamations", "list", ""]
						}
					}
				},
				{
					"name": "List All Reclamations",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{reclamation_url}}/api/reclamations/list/",
							"host": ["{{reclamation_url}}"],
							"path": ["api", "reclamations", "list", ""]
						}
					}
				},
				{
					"name": "Get Reclamation by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{reclamation_url}}/api/reclamations/list/{{reclamation_id}}/",
							"host": ["{{reclamation_url}}"],
							"path": ["api", "reclamations", "list", "{{reclamation_id}}", ""]
						}
					}
				},
				{
					"name": "Get Reclamations by User",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{reclamation_url}}/api/reclamations/list/?user_qr_code=SB-{{user_id}}",
							"host": ["{{reclamation_url}}"],
							"path": ["api", "reclamations", "list", ""],
							"query": [
								{
									"key": "user_qr_code",
									"value": "SB-{{user_id}}"
								}
							]
						}
					}
				},
				{
					"name": "Get Reclamations by Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{reclamation_url}}/api/reclamations/list/?status=pending",
							"host": ["{{reclamation_url}}"],
							"path": ["api", "reclamations", "list", ""],
							"query": [
								{
									"key": "status",
									"value": "pending",
									"description": "Options: pending, in_progress, resolved, rejected"
								}
							]
						}
					}
				},
				{
					"name": "Get Reclamations by Bin",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{reclamation_url}}/api/reclamations/list/?bin_id={{bin_id}}",
							"host": ["{{reclamation_url}}"],
							"path": ["api", "reclamations", "list", ""],
							"query": [
								{
									"key": "bin_id",
									"value": "{{bin_id}}"
								}
							]
						}
					}
				},
				{
					"name": "Update Reclamation Status",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"in_progress\",\n    \"priority\": \"high\",\n    \"admin_notes\": \"Assigned to maintenance team\"\n}"
						},
						"url": {
							"raw": "{{reclamation_url}}/api/reclamations/list/{{reclamation_id}}/",
							"host": ["{{reclamation_url}}"],
							"path": ["api", "reclamations", "list", "{{reclamation_id}}", ""]
						}
					}
				},
				{
					"name": "Resolve Reclamation",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{reclamation_url}}/api/reclamations/list/{{reclamation_id}}/resolve/",
							"host": ["{{reclamation_url}}"],
							"path": ["api", "reclamations", "list", "{{reclamation_id}}", "resolve", ""]
						}
					}
				},
				{
					"name": "Set Reclamation In Progress",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{reclamation_url}}/api/reclamations/list/{{reclamation_id}}/in-progress/",
							"host": ["{{reclamation_url}}"],
							"path": ["api", "reclamations", "list", "{{reclamation_id}}", "in-progress", ""]
						}
					}
				},
				{
					"name": "Get Reclamation Statistics",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{reclamation_url}}/api/reclamations/list/stats/",
							"host": ["{{reclamation_url}}"],
							"path": ["api", "reclamations", "list", "stats", ""]
						}
					}
				}
			]
		}
	]
}
